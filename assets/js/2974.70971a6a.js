"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2974],{22974:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>l,default:()=>u,frontMatter:()=>i,toc:()=>o});var a=n(87462),r=(n(67294),n(3905));const i={},l=void 0,o=[{value:"Example",id:"example",level:2},{value:"Expected Behavior",id:"expected-behavior",level:2},{value:"Summary",id:"summary",level:2}],p={toc:o},d="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"example"},"Example"),(0,r.kt)("p",null,"You can see a simple HTML5 drag and drop example ",(0,r.kt)("a",{parentName:"p",href:"http://the-internet.herokuapp.com/drag_and_drop"},"here on the-internet"),"."),(0,r.kt)("p",null,"First, let's borrow ",(0,r.kt)("a",{parentName:"p",href:"https://gist.github.com/rcorreia/2362544"},"the JavaScript made available by rcorreia on GitHub")," for this workaround and store it in a local file (e.g., ",(0,r.kt)("inlineCode",{parentName:"p"},"dnd.js"),")."),(0,r.kt)("p",null,"Now we can create a Selenium script to consume the JavaScript file, visit the page, execute the JavaScript, and perform an assertion."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ruby"},"require 'selenium-webdriver'\nrequire 'rspec/expectations'\ninclude RSpec::Matchers\n\ndef setup\n  @driver = Selenium::WebDriver.for :firefox\nend\n\ndef teardown\n  @driver.quit\nend\n\ndef run\n  setup\n  yield\n  teardown\nend\n")),(0,r.kt)("p",null,"After including our dependent libraries, we wire up our ",(0,r.kt)("inlineCode",{parentName:"p"},"setup"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"teardown"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"run")," actions. Now we're ready to write our test."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ruby"},"run do\n  @driver.get \"http://the-internet.herokuapp.com/drag_and_drop\"\n\n  dnd_javascript = File.read(Dir.pwd + '/dnd.js')\n  @driver.execute_script(dnd_javascript+\"$('#column-a').simulateDragDrop({ dropTarget: '#column-b'});\")\n\n  expect(@driver.find_element(id: 'column-a').text).to eql('B')\n  expect(@driver.find_element(id: 'column-b').text).to eql('A')\n\nend\n")),(0,r.kt)("p",null,"After loading the page we read in the ",(0,r.kt)("inlineCode",{parentName:"p"},"dnd.js")," file and store it in a local variable. We then use Selenium to execute ",(0,r.kt)("inlineCode",{parentName:"p"},"dnd_javascript")," along with the function calls and elements we want to work with. After that, it's just a simple matter of grabbing text from the page and making an assertion against it."),(0,r.kt)("p",null,"Since there are only two elements to drag and drop on the page, they should have switched places. So, ",(0,r.kt)("inlineCode",{parentName:"p"},"column-a")," should now contain the text 'B', and ",(0,r.kt)("inlineCode",{parentName:"p"},"column-b")," should contain the text 'A'."),(0,r.kt)("h2",{id:"expected-behavior"},"Expected Behavior"),(0,r.kt)("p",null,"When you run the ruby file, here is what will happen:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Open the browser"),(0,r.kt)("li",{parentName:"ul"},"Visit the page"),(0,r.kt)("li",{parentName:"ul"},"Text in Column A and Column B will switches places"),(0,r.kt)("li",{parentName:"ul"},"Close the browser")),(0,r.kt)("h2",{id:"summary"},"Summary"),(0,r.kt)("p",null,"Hopefully this tip has helped you figure out how to wrangle HTML5 dragging and dropping while there is a known bug for it in Selenium."),(0,r.kt)("p",null,"Happy Testing!"))}u.isMDXComponent=!0}}]);