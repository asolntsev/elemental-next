"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6893],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>g});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=r.createContext({}),p=function(e){var t=r.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},s="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,u=d(e,["components","mdxType","originalType","parentName"]),s=p(a),m=n,g=s["".concat(l,".").concat(m)]||s[m]||c[m]||o;return a?r.createElement(g,i(i({ref:t},u),{},{components:a})):r.createElement(g,i({ref:t},u))}));function g(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=m;var d={};for(var l in t)hasOwnProperty.call(t,l)&&(d[l]=t[l]);d.originalType=e,d[s]="string"==typeof e?e:n,i[1]=d;for(var p=2;p<o;p++)i[p]=a[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},602:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>d,toc:()=>p});var r=a(7462),n=(a(7294),a(3905));const o={title:"How to Test HTML5 Drag and Drop",id:"39-drag-and-drop-ruby",contentUrl:"docs/drag-and-drop/39-drag-and-drop-ruby",sidebar_label:"Ruby",text:"Exercising a page's drag-and-drop functionality used to be simple with Selenium's Action Builder, but sadly, it won't work with HTML5 drag and drop.",number:39,hide_table_of_contents:!0,publish_date:new Date("2014-02-25T00:00:00.000Z"),last_update:{date:new Date("2023-03-02T00:00:00.000Z")},tags:["drag and drop","DnD","javascript","bug"],level:2,category:["remote"],language:"ruby"},i="How to Test HTML5 Drag and Drop",d={unversionedId:"drag-and-drop/39-drag-and-drop-ruby",id:"drag-and-drop/39-drag-and-drop-ruby",title:"How to Test HTML5 Drag and Drop",description:"Intro",source:"@site/docs/39-drag-and-drop/ruby.mdx",sourceDirName:"39-drag-and-drop",slug:"/drag-and-drop/39-drag-and-drop-ruby",permalink:"/docs/drag-and-drop/39-drag-and-drop-ruby",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/39-drag-and-drop/ruby.mdx",tags:[{label:"drag and drop",permalink:"/docs/tags/drag-and-drop"},{label:"DnD",permalink:"/docs/tags/dn-d"},{label:"javascript",permalink:"/docs/tags/javascript"},{label:"bug",permalink:"/docs/tags/bug"}],version:"current",lastUpdatedBy:"Paloma Oliveira",lastUpdatedAt:1677715200,formattedLastUpdatedAt:"Mar 2, 2023",frontMatter:{title:"How to Test HTML5 Drag and Drop",id:"39-drag-and-drop-ruby",contentUrl:"docs/drag-and-drop/39-drag-and-drop-ruby",sidebar_label:"Ruby",text:"Exercising a page's drag-and-drop functionality used to be simple with Selenium's Action Builder, but sadly, it won't work with HTML5 drag and drop.",number:39,hide_table_of_contents:!0,publish_date:"2014-02-25T00:00:00.000Z",last_update:{date:"2023-03-02T00:00:00.000Z"},tags:["drag and drop","DnD","javascript","bug"],level:2,category:["remote"],language:"ruby"},sidebar:"tutorialSidebar",previous:{title:"Ruby",permalink:"/docs/available-resources/36-available-resources"},next:{title:"Csharp",permalink:"/docs/disabled-element/40-disabled-element-csharp"}},l={},p=[{value:"Intro",id:"intro",level:2},{value:"A Solution",id:"a-solution",level:2},{value:"Example",id:"example",level:2},{value:"Expected Behavior",id:"expected-behavior",level:2},{value:"Summary",id:"summary",level:2},{value:"About The Author",id:"about-the-author",level:2}],u={toc:p},s="wrapper";function c(e){let{components:t,...o}=e;return(0,n.kt)(s,(0,r.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"how-to-test-html5-drag-and-drop"},"How to Test HTML5 Drag and Drop"),(0,n.kt)("h2",{id:"intro"},"Intro"),(0,n.kt)("p",null,"Exercising a page's drag-and-drop functionality used to be simple with ",(0,n.kt)("a",{parentName:"p",href:"http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/ActionBuilder.html"},"Selenium's Action Builder"),", but sadly, ",(0,n.kt)("a",{parentName:"p",href:"https://code.google.com/p/selenium/issues/detail?id=6315"},"it won't work with HTML5 drag and drop"),"."),(0,n.kt)("h2",{id:"a-solution"},"A Solution"),(0,n.kt)("p",null,"As a workaround, we can simulate dragging and dropping by executing JavaScript with Selenium. Let's continue with an example."),(0,n.kt)("h2",{id:"example"},"Example"),(0,n.kt)("p",null,"You can see a simple HTML5 drag and drop example ",(0,n.kt)("a",{parentName:"p",href:"http://the-internet.herokuapp.com/drag_and_drop"},"here on the-internet"),"."),(0,n.kt)("p",null,"First, let's borrow ",(0,n.kt)("a",{parentName:"p",href:"https://gist.github.com/rcorreia/2362544"},"the JavaScript made available by rcorreia on GitHub")," for this workaround and store it in a local file (e.g., ",(0,n.kt)("inlineCode",{parentName:"p"},"dnd.js"),")."),(0,n.kt)("p",null,"Now we can create a Selenium script to consume the JavaScript file, visit the page, execute the JavaScript, and perform an assertion."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ruby"},"require 'selenium-webdriver'\nrequire 'rspec/expectations'\ninclude RSpec::Matchers\n\ndef setup\n  @driver = Selenium::WebDriver.for :firefox\nend\n\ndef teardown\n  @driver.quit\nend\n\ndef run\n  setup\n  yield\n  teardown\nend\n")),(0,n.kt)("p",null,"After including our dependent libraries, we wire up our ",(0,n.kt)("inlineCode",{parentName:"p"},"setup"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"teardown"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"run")," actions. Now we're ready to write our test."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ruby"},"run do\n  @driver.get \"http://the-internet.herokuapp.com/drag_and_drop\"\n\n  dnd_javascript = File.read(Dir.pwd + '/dnd.js')\n  @driver.execute_script(dnd_javascript+\"$('#column-a').simulateDragDrop({ dropTarget: '#column-b'});\")\n\n  expect(@driver.find_element(id: 'column-a').text).to eql('B')\n  expect(@driver.find_element(id: 'column-b').text).to eql('A')\n\nend\n")),(0,n.kt)("p",null,"After loading the page we read in the ",(0,n.kt)("inlineCode",{parentName:"p"},"dnd.js")," file and store it in a local variable. We then use Selenium to execute ",(0,n.kt)("inlineCode",{parentName:"p"},"dnd_javascript")," along with the function calls and elements we want to work with. After that, it's just a simple matter of grabbing text from the page and making an assertion against it."),(0,n.kt)("p",null,"Since there are only two elements to drag and drop on the page, they should have switched places. So, ",(0,n.kt)("inlineCode",{parentName:"p"},"column-a")," should now contain the text 'B', and ",(0,n.kt)("inlineCode",{parentName:"p"},"column-b")," should contain the text 'A'."),(0,n.kt)("h2",{id:"expected-behavior"},"Expected Behavior"),(0,n.kt)("p",null,"When you run the ruby file, here is what will happen:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Open the browser"),(0,n.kt)("li",{parentName:"ul"},"Visit the page"),(0,n.kt)("li",{parentName:"ul"},"Text in Column A and Column B will switches places"),(0,n.kt)("li",{parentName:"ul"},"Close the browser")),(0,n.kt)("h2",{id:"summary"},"Summary"),(0,n.kt)("p",null,"Hopefully this tip has helped you figure out how to wrangle HTML5 dragging and dropping while there is a known bug for it in Selenium."),(0,n.kt)("p",null,"Happy Testing!"),(0,n.kt)("h2",{id:"about-the-author"},"About The Author"),(0,n.kt)("p",null,"Dave Haeffner is the original writer of Elemental Selenium -- a free, once weekly Selenium tip newsletter that's read by thousands of testing professionals. He also created and maintains the-internet (an open-source web app that's perfect for writing automated tests against)."),(0,n.kt)("p",null,"Dave has helped numerous companies successfully implement automated acceptance testing; including The Motley Fool, ManTech International, Sittercity, and Animoto. He is also an active member of the Selenium project and has spoken at numerous conferences and meetups around the world about automated acceptance testing."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Dave Haeffner profile picture",src:a(9417).Z+"#author-img",title:"a title",width:"280",height:"280"})))}c.isMDXComponent=!0},9417:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/dave-haeffner-4b48111a5789c5e16142754eb2f51920.jpeg"}}]);