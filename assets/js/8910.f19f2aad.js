"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8910],{8910:(e,n,i)=>{i.r(n),i.d(n,{contentTitle:()=>s,default:()=>l,frontMatter:()=>o,toc:()=>a});var t=i(5893),r=i(1151);const o={},s=void 0,a=[{value:"Example 1",id:"example-1",level:2},{value:"Example 2",id:"example-2",level:2},{value:"Expected Behavior",id:"expected-behavior",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"example-1",children:"Example 1"}),"\n",(0,t.jsxs)(n.p,{children:["First let's import our requisite classes (for annotations (e.g., ",(0,t.jsx)(n.code,{children:"org.junit.After"}),", etc.), driving the browser with Selenium (e.g., ",(0,t.jsx)(n.code,{children:"org.openqa.selenium.WebDriver"}),", etc.), and matchers for our assertions (e.g., ",(0,t.jsx)(n.code,{children:"org.hamcrest.CoreMatchers"}),", etc.)) and start our class with some setup and teardown methods."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// filename: MultipleWindows.java\n\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.firefox.FirefoxDriver;\nimport java.util.Set;\nimport static org.hamcrest.MatcherAssert.assertThat;\nimport static org.hamcrest.CoreMatchers.*;\n\npublic class MultipleWindows {\n    WebDriver driver;\n\n    @Before\n    public void setUp() throws Exception {\n        driver = new FirefoxDriver();\n    }\n\n    @After\n    public void tearDown() throws Exception {\n        driver.quit();\n    }\n// ...\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Now let's write a test that exercises new window functionality from an application. In this case, we'll be using ",(0,t.jsx)(n.a,{href:"http://the-internet.herokuapp.com/windows",children:"the new window example"})," from ",(0,t.jsx)(n.a,{href:"https://github.com/tourdedave/the-internet",children:"the-internet"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// filename: MultipleWindows.java\n// ...\n    @Test\n    public void multipleWindows() {\n        driver.get("http://the-internet.herokuapp.com/windows");\n        driver.findElement(By.cssSelector(".example a")).click();\n        Object[] allWindows = driver.getWindowHandles().toArray();\n        driver.switchTo().window(allWindows[0].toString());\n        assertThat(driver.getTitle(), is(not("New Window")));\n        driver.switchTo().window(allWindows[1].toString());\n\n        Thread.sleep(2000);\n        assertThat(driver.getTitle(), is("New Window"));\n        Thread.sleep(2000);\n    }\n// ...\n'})}),"\n",(0,t.jsx)(n.p,{children:"After loading the page we click the link which spawns a new window. We then grab the window handles (a.k.a. unique identifier strings which represent each open browser window) and switch between them based on their order (assuming that the first one is the originating window, and that the second one is the new window). We round this test out by performing a simple check against the title of the page to make sure Selenium is focused on the correct window."}),"\n",(0,t.jsxs)(n.p,{children:["While this may seem like a good approach, it can present problems later. That's because the order of the window handles is not consistent across all browsers. Some return it in the order opened, others ",(0,t.jsx)(n.em,{children:"alphabetically"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Here's a more resilient approach. One that will work across all browsers."}),"\n",(0,t.jsx)(n.h2,{id:"example-2",children:"Example 2"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// filename: MultipleWindows.java\n// ...\n    @Test\n    public void multipleWindowsRedux() {\n        driver.get("http://the-internet.herokuapp.com/windows");\n        String firstWindow = driver.getWindowHandle();\n        String newWindow = "";\n        driver.findElement(By.cssSelector(".example a")).click();\n        Set<String> allWindows = driver.getWindowHandles();\n\n        for (String window : allWindows) {\n            if (!window.equals(firstWindow)) {\n                newWindow = window;\n            }\n        }\n\n        driver.switchTo().window(firstWindow);\n        assertThat(driver.getTitle(), is(not(equalTo("New Window"))));\n\n        driver.switchTo().window(newWindow);\n\n        Thread.sleep(2000);\n        assertThat(driver.getTitle(), is(equalTo("New Window")));\n        Thread.sleep(2000);\n    }\n\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["After loading the page we store the window handle in a variable (e.g., ",(0,t.jsx)(n.code,{children:"firstWindow"}),") and then proceed with clicking the new window link."]}),"\n",(0,t.jsxs)(n.p,{children:["Now that we have two windows open we grab all of the window handles and search through them to find the new window handle (e.g., the handle that doesn't match the one we've already stored). We store the new window result in another variable (e.g., ",(0,t.jsx)(n.code,{children:"newWindow"}),") and then switch between the windows, checking page title each time to make sure the correct window is in focus."]}),"\n",(0,t.jsx)(n.h2,{id:"expected-behavior",children:"Expected Behavior"}),"\n",(0,t.jsxs)(n.p,{children:["If you save this file and run it (e.g., ",(0,t.jsx)(n.code,{children:"mvn clean test"})," from the command-line) here is what will happen for either example:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Open the browser"}),"\n",(0,t.jsx)(n.li,{children:"Visit the page"}),"\n",(0,t.jsx)(n.li,{children:"Click to open a new window"}),"\n",(0,t.jsx)(n.li,{children:"Switch between the windows"}),"\n",(0,t.jsx)(n.li,{children:"Check the page title to make sure the correct window is in focus"}),"\n",(0,t.jsx)(n.li,{children:"Close the browser"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(n.p,{children:"I hope this was a helpful guide on how to work with and switch between multiple windows using Selenium."}),"\n",(0,t.jsxs)(n.p,{children:["Thanks to ",(0,t.jsx)(n.a,{href:"https://twitter.com/jimevansmusic",children:"Jim Evans"})," for providing the info for this tip, and ",(0,t.jsx)(n.a,{href:"https://github.com/RomanIsko",children:"Roman Isko"})," for the initial code contribution."]}),"\n",(0,t.jsxs)(n.p,{children:["For more information about switching windows (and tabs) visit the official Selenium HQ ",(0,t.jsx)(n.a,{href:"https://www.selenium.dev/documentation/webdriver/interactions/windows/",children:"documentation page"}),"."]})]})}function l(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);