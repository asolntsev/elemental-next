import TipCode from "@site/src/components/tipCode";

## TL;DR - Show Me The Code

<TipCode codePath={"2-download-a-file/code/selenide/src/test/java/com/elemental/selenium/DownloadTest.java"}
         language={"java"}/>

## Code Walkthrough

### Importing Libraries

First, we pull in our requisite classes:
  * test runner (e.g., `org.junit.jupiter.api.BeforeEach`, etc.),
  * opening the browser with Selenide (e.g., `com.codeborne.selenide.Selenide.open`),
  * matchers for assertions (e.g., `org.assertj.core.api.Assertions.assertThat`)

NB! You don't need to add the typical "selenium*" dependencies.
Just one dependency is enough: `com.codeborne:selenide`.
It will pull down all the needed Selenium dependencies automatically.

### Setup and Teardown

Next, we are setting up the browser instance. The `openAUT` opens the application under test before
each test.

### The Test

Our `downloadFile` test, after visiting the page, we find the download link and call method `download` for it.
This method does its magic and returns the downloaded file. Now you can verify its name or content.

NB! You don't need to find the downloaded file in any directories. Method `$.download()` _returns_ the file. It's
already available for you, so you can verify it right away.

### More About Downloading Files in Selenide

Selenide sample for downloading files is straightforward because Selenide does all the work for you:
* creates a uniquely named temp directory
* configures the browser to make it automatically download files to that unique directory
* clicks a web element
* waits until the file arises in the downloads folder

In addition, Selenide has more [ways to download files](https://selenide.org/javadoc/current/com/codeborne/selenide/FileDownloadMode.html:
  * `HTTPGET` (default one)
  * `FOLDER`
  * `CDP`
  * `PROXY`

Learn more about downloading files in Selenide from Andrei Solntsev's
[YouTube video](https://www.youtube.com/watch?v=GwHG550moGc)
and [blog post](https://selenide.org/2019/12/10/advent-calendar-download-files/).

### Executing the Test

Before executing the test, we need to make sure the required dependencies are declared on the `pom.xml` file.

<details>
    <summary>Toggle to see the <code>pom.xml</code> file.</summary>
    <div>
        <TipCode codePath={"2-download-a-file/code/selenide/pom.xml"} language={"xml"}/>
    </div>
</details>

Finally, we can run the test by executing `mvn test` from the command-line.
